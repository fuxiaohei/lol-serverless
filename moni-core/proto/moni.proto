syntax = "proto3";

package moni;

// LoginTokenRequest is the request message for the LoginByToken method.
message LoginTokenRequest { string token = 1; }

// LoginTokenResponse is the response message for the LoginByToken method.
// it contains an jwt token generated from LoginTokenRequest.token
message LoginTokenResponse { string jwt_token = 1; }

// CreateFunctionRequest is the request message for the CreateFunction method.
message CreateFunctionRequest {
  string name = 1;
  bytes code = 2;
  string description = 3;
  string md5 = 4;
}

// CreateFunctionResponse is the response message for the CreateFunction method.
message CreateFunctionResponse {
  string error = 1;
  FunctionData data = 2;
  int64 code = 3;
}

// FunctionData contains the data of a function created by the CreateFunction
// method.
message FunctionData {
  string uuid = 1;
  string name = 2;
  string md5 = 3;
  string description = 4;
  string version = 5;
}

service MoniRpcService {

  // LoginByToken returns a jwt token generated from LoginTokenRequest.token
  rpc LoginByToken(LoginTokenRequest) returns (LoginTokenResponse);

  // CreateFunction creates a new function with the specified data and returns
  // its information
  rpc CreateFunction(CreateFunctionRequest) returns (CreateFunctionResponse);
}