syntax = "proto3";

package moni;

// LoginEmailRequest is the request message for the LoginEmail method.
message LoginEmailRequest {
  string email = 1;
  string password = 2;
}

// LoginAccessTokenRequest is the request message for the LoginAccessToken
message LoginAccessTokenRequest{
  string access_token = 1;
}

// LoginResponse is the response message for the LoginEmail method.
message LoginResponse {
  int64 code = 1;
  LoginResultData data = 2;
  string error = 3;
}

// LoginResultData contains the data of a user logged in by the LoginEmail
message LoginResultData{
  string access_token = 1;
  string display_name = 2;
  string display_email = 3;
  string avatar_url = 4;
}

// CreateProjectRequest is the request message for the CreateProject method.
message CreateProjectRequest {
  string name = 1;
  bytes code = 2;
  string description = 3;
  string md5 = 4;
  string language = 5;
  bool publish = 6;
}

// CreateProjectResponse is the response message for the CreateProject method.
message CreateProjectResponse {
  string error = 1;
  ProjectData data = 2;
  int64 code = 3;
}

// ProjectData contains the data of a function created by the CreateProject
// method.
message ProjectData {
  string uuid = 1;
  string name = 2;
  string version = 3;
}

service MoniRpcService {
  // LoginEmail logs in a user with the specified email and password
  rpc LoginEmail(LoginEmailRequest) returns (LoginResponse);

  // LoginAccessToken logs in a user with the specified access token
  rpc LoginAccessToken(LoginAccessTokenRequest) returns (LoginResponse);

  // CreateProject creates a new function project with the specified data and
  // returns its information
  rpc CreateProject(CreateProjectRequest) returns (CreateProjectResponse);
}
